{"version":3,"file":"js/577.944ae1de.js","mappings":"mPACOA,MAAM,iB,aAIwBA,MAAM,gBAAgBC,MAAA,mB,GAE9CD,MAAM,S,UACTE,EAAAA,EAAAA,GAAa,WAAR,MAAE,K,UAEPA,EAAAA,EAAAA,GAAe,WAAV,QAAI,K,UAGXA,EAAAA,EAAAA,GAAI,qB,GACCF,MAAM,U,UACTE,EAAAA,EAAAA,GAAa,WAAR,MAAE,K,UAEPA,EAAAA,EAAAA,GAAI,qB,UACJA,EAAAA,EAAAA,GAA0B,WAArB,mBAAe,K,oGAjB5BC,EAAAA,EAAAA,IAsBM,MAtBNC,EAsBM,CArBOC,EAAAC,aAAU,WAArBH,EAAAA,EAAAA,IAEM,MAAAI,EAAA,EADJC,EAAAA,EAAAA,IAA8CC,EAAA,CAArCT,MAAM,QAAM,C,kBAAC,IAAc,UAAd,qB,+CAExBG,EAAAA,EAAAA,IAiBK,KAjBLO,EAiBK,gBAhBHP,EAAAA,EAAAA,IAeKQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAfsBP,EAAAQ,SAAO,CAAtBC,EAAKC,M,WAAjBZ,EAAAA,EAAAA,IAeK,MAfgCa,IAAKD,EAAOf,MAAM,sB,EACrDE,EAAAA,EAAAA,GAKM,MALNe,EAKM,CAJJC,GAAa,aACbC,EAAAA,EAAAA,IAAGL,EAAKM,IAAK,MACb,GAAAC,GAAe,aACfF,EAAAA,EAAAA,IAAGL,EAAKQ,MAAI,KAEdC,GACArB,EAAAA,EAAAA,GAMM,MANNsB,EAMM,CALJC,GAAa,aACbN,EAAAA,EAAAA,IAAGL,EAAKY,IAAK,IACb,GAAAC,EACAC,GAA0B,aAC1BT,EAAAA,EAAAA,IAAGL,EAAKe,iBAAe,U,aAdNC,EAAAC,a,iCA0B3B,GACEC,KAAM,MACNC,OACE,MAAO,CACLC,MAAO,EACPrB,QAAS,GACTsB,OAAQ,EACR7B,YAAY,EAEhB,EACA8B,QAAS,CACPC,aAAaC,EAAOC,EAAKC,GACvB,MAAMC,EAAWD,GAAS,OAC1BE,EAAAA,EAAAA,IAAU,CACRC,SAASC,EAAAA,EAAAA,GAAE,IAAK,KAAM,EACpBA,EAAAA,EAAAA,GAAE,OAAQ,KAAMN,IAChBM,EAAAA,EAAAA,GAAE,IAAK,CAAC3C,MAAQ,UAASwC,KAAaF,KAExCM,UAAU,GAEd,EAKAC,iBACE,MAAMC,EAASC,OAAOC,KAAKC,KAAKrC,SAASkC,OAE3B,GAAVA,QAEII,EAAAA,EAAAA,OAAY,CAChBC,IAAK,iBACLC,OAAQ,OACRC,QAAS,CACPC,OAAO,KAGNC,MAAKC,IACJP,KAAKrC,QAAU4C,EAAIC,OACdD,EAAIE,UACPT,KAAKb,aAAaoB,EAAId,SACtBO,KAAK5C,YAAa,EACpB,IAEDsD,OAAMC,IACLX,KAAKb,aAAawB,EAAE,UAGpBV,EAAAA,EAAAA,OAAY,CAChBC,IAAK,iBACLC,OAAQ,OACRC,QAAS,CACPC,OAAO,GAETtB,KAAM,CAGJ6B,OAAQf,KAGPS,MAAKC,IACCA,EAAIE,SACPT,KAAKb,aAAaoB,EAAId,SAIxBO,KAAKrC,QAAQkD,QAAQN,EAAIC,SACzBhB,EAAAA,EAAAA,IAAU,CACRC,QAASc,EAAId,QACbE,UAAU,EACVmB,KAAM,WACN,IAEHJ,OAAMC,IACLX,KAAKb,aAAawB,EAAE,GAG9B,EAKAI,aAEA,GAEFC,UACEhB,KAAKnB,WACLmB,KAAKe,YACP,G,UCjHF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://blogfront/./src/components/admin/Log.vue","webpack://blogfront/./src/components/admin/Log.vue?d357"],"sourcesContent":["<template>\r\n  <div class=\"log container\">\r\n    <div v-if=\"notIsAdmin\">\r\n      <el-text class=\"mx-1\">不是admin用户,无法查看</el-text>\r\n    </div>\r\n    <ul v-infinite-scroll=\"initData\" class=\"infinite-list\" style=\"overflow: auto\">\r\n      <li v-for=\"(item,index) in logList\" :key=\"index\" class=\"infinite-list-item\">\r\n        <div class=\"title\">\r\n          <pre>id</pre>\r\n          {{ item.id }} |\r\n          <pre>time</pre>\r\n          {{ item.time }}\r\n        </div>\r\n        <br>\r\n        <div class=\"detail\">\r\n          <pre>ip</pre>\r\n          {{ item.ip }}\r\n          <br>\r\n          <pre>fileNameAndPath</pre>\r\n          {{ item.fileNameAndPath }}\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from \"@/common/api/request\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport {h} from \"vue\";\r\n\r\nexport default {\r\n  name: \"Log\",\r\n  data() {\r\n    return {\r\n      count: 0,\r\n      logList: [],\r\n      lastId: 0,\r\n      notIsAdmin: false\r\n    }\r\n  },\r\n  methods: {\r\n    alertMessage(title, sub, color) {\r\n      const useColor = color || 'red';\r\n      ElMessage({\r\n        message: h('p', null, [\r\n          h('span', null, title),\r\n          h('i', {style: `color: ${useColor}`}, sub),\r\n        ]),\r\n        grouping: true,\r\n      })\r\n    },\r\n    /* @author icestone , 18:54\r\n     * @date 2023/5/8\r\n     * TODO 初始化一下数据\r\n    */\r\n    async initData() {\r\n      const length = Object.keys(this.logList).length\r\n      // length 为0,则为第一次进入页面\r\n      if (length == 0) {\r\n        // 发起请求,\r\n        await http.$axios({\r\n          url: '/admin/getLogs',\r\n          method: 'POST',\r\n          headers: {\r\n            token: true\r\n          }\r\n        })\r\n            .then(res => {\r\n              this.logList = res.result;\r\n              if (!res.success) {\r\n                this.alertMessage(res.message)\r\n                this.notIsAdmin = true;\r\n              }\r\n            })\r\n            .catch(e => {\r\n              this.alertMessage(e)\r\n            })\r\n      } else {\r\n        await http.$axios({\r\n          url: '/admin/getLogs',\r\n          method: 'POST',\r\n          headers: {\r\n            token: true\r\n          },\r\n          data: {\r\n            // @date 2023/5/9 , @author icestone\r\n            // TODO 跳过的数量,这里根据 logList 的长度计算\r\n            offset: length\r\n          }\r\n        })\r\n            .then(res => {\r\n              if (!res.success) {\r\n                this.alertMessage(res.message)\r\n              }\r\n              // @date 2023/5/9 , @author icestone\r\n              // TODO 合并对象\r\n              this.logList.push(...res.result)\r\n              ElMessage({\r\n                message: res.message,\r\n                grouping: true,\r\n                type: 'success',\r\n              })\r\n            })\r\n            .catch(e => {\r\n              this.alertMessage(e)\r\n            })\r\n      }\r\n    },\r\n    /* @author icestone , 14:33\r\n     * @date 2023/5/9\r\n     * TODO 获取log的信息,allCount之类的\r\n    */\r\n    getLogInfo() {\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.initData();\r\n    this.getLogInfo();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.infinite-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 90vh;\r\n  padding: 0;\r\n  margin: 0;\r\n  list-style: none;\r\n\r\n  .infinite-list-item {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: auto;\r\n    background: var(--el-color-primary-light-9);\r\n    margin: .3rem;\r\n    color: var(--el-color-primary);\r\n    flex-direction: column;\r\n\r\n    .title, .detail {\r\n      display: flex;\r\n      flex-direction: row;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./Log.vue?vue&type=template&id=689c6767&scoped=true\"\nimport script from \"./Log.vue?vue&type=script&lang=js\"\nexport * from \"./Log.vue?vue&type=script&lang=js\"\n\nimport \"./Log.vue?vue&type=style&index=0&id=689c6767&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\githubClone\\\\iceYouBlog\\\\blogfront\\\\node_modules\\\\.store\\\\vue-loader@17.1.1\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-689c6767\"]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","_createElementBlock","_hoisted_1","$data","notIsAdmin","_hoisted_2","_createVNode","_component_el_text","_hoisted_3","_Fragment","_renderList","logList","item","index","key","_hoisted_4","_hoisted_5","_toDisplayString","id","_hoisted_6","time","_hoisted_7","_hoisted_8","_hoisted_9","ip","_hoisted_10","_hoisted_11","fileNameAndPath","$options","initData","name","data","count","lastId","methods","alertMessage","title","sub","color","useColor","ElMessage","message","h","grouping","async","length","Object","keys","this","http","url","method","headers","token","then","res","result","success","catch","e","offset","push","type","getLogInfo","created","__exports__","render"],"sourceRoot":""}