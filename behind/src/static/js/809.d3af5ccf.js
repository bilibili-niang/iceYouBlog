"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[809],{5305:function(e,o,s){s.d(o,{Z:function(){return u}});var l=s(4535);const n={key:0,class:"alert"};function t(e,o,s,t,a,r){const i=(0,l.up)("el-alert");return s.show?((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(i,{title:s.msg,type:"info",center:"","show-icon":""},null,8,["title"])])):(0,l.kq)("",!0)}var a={name:"Alert",props:["msg","show"]},r=s(8696);const i=(0,r.Z)(a,[["render",t],["__scopeId","data-v-f994ff96"]]);var u=i},7809:function(e,o,s){s.r(o),s.d(o,{default:function(){return f}});var l=s(4535);const n={class:"login container"},t={class:"form hover-around-shadow animation-time"},a={class:"btns"};function r(e,o,s,r,i,u){const c=(0,l.up)("el-input"),g=(0,l.up)("el-button"),d=(0,l.up)("Alert");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",n,[(0,l._)("div",t,[(0,l.Wm)(c,{modelValue:i.login.username,"onUpdate:modelValue":o[0]||(o[0]=e=>i.login.username=e),placeholder:"Please input username",clearable:""},null,8,["modelValue"]),(0,l.Wm)(c,{modelValue:i.login.password,"onUpdate:modelValue":o[1]||(o[1]=e=>i.login.password=e),placeholder:"Please input pwd",clearable:""},null,8,["modelValue"]),(0,l._)("div",a,[(0,l.Wm)(g,{onClick:u.submit},{default:(0,l.w5)((()=>[(0,l.Uk)("登录")])),_:1},8,["onClick"]),(0,l.Wm)(g,{onClick:u.getToken},{default:(0,l.w5)((()=>[(0,l.Uk)("get")])),_:1},8,["onClick"])])])]),(0,l.Wm)(d,{msg:i.alertInf,show:i.showAlert},null,8,["msg","show"])],64)}s(4119);var i=s(9510),u=s(7115),c=s(5305),g=s(1112),d={name:"Login",data(){return{login:{username:"",password:""},warning:!1,alertInf:"暂无消息",showAlert:!1}},methods:{alertMessage(e,o,s){const n=s||"red";(0,g.z8)({message:(0,l.h)("p",null,[(0,l.h)("span",null,e),(0,l.h)("i",{style:`color: ${n}`},o)])})},async submit(){(this.login.username.length<1||this.login.password.length<1)&&console.log("data error");const e=await i.Z.$axios({url:"/user/login",method:"POST",data:this.login});if(e.success){this.alertMessage(e.message);const o=e.result||"";console.log("即将写入的user信息"),console.log(JSON.stringify(o)),localStorage.setItem("userInfo",JSON.stringify(o)),this.alertMessage("已有用户登录,跳转用户页面"),u.Z.push({path:"/user"})}else this.alertInf=e.message,this.showAlert=!0,this.alertMessage(e.message)},getToken(){const e=JSON.parse(localStorage.getItem("userInfo"));JSON.stringify(e)>10?(console.log(e),console.log(e.id)):console.log("token is null")},verifyLogin(){const e=localStorage.getItem("userInfo");console.log("localStorage:"),console.log(e),JSON.stringify(e).length<10?localStorage.removeItem("userInfo"):u.Z.push({path:"/user"})}},created(){this.verifyLogin()},components:{Alert:c.Z}},m=s(8696);const h=(0,m.Z)(d,[["render",r],["__scopeId","data-v-00af5456"]]);var f=h}}]);
//# sourceMappingURL=809.d3af5ccf.js.map