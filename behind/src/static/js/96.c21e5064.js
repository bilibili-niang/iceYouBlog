"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[96],{64:function(e,l,s){s.r(l),s.d(l,{default:function(){return P}});var n=s(4535),a=s(60);const t=e=>((0,n.dD)("data-v-d0def9f0"),e=e(),(0,n.Cn)(),e),i={class:"adminIndex container"},o={class:"card"},r={class:"avatar"},d={class:"card-body"},u={class:"card-title"},m=t((()=>(0,n._)("p",{class:"card-text"},"admin用户",-1))),c={class:"list-group list-group-flush"},f={class:"list-group-item"},g={class:"list-group-item"},k={class:"list-group-item"},_={class:"UserInfo"},p={class:"Lim"},h={class:"Lim"},w={class:"Lim"},v={class:"Lim"},U={class:"Lim"},W={class:"uerOptions"};function L(e,l,s,t,L,b){const I=(0,n.up)("Avatar"),A=(0,n.up)("FriendLinks"),x=(0,n.up)("el-tab-pane"),C=(0,n.up)("el-text"),y=(0,n.up)("el-link"),z=(0,n.up)("el-button"),S=(0,n.up)("el-col"),D=(0,n.up)("el-tag"),$=(0,n.up)("el-row"),O=(0,n.up)("el-tabs");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",o,[(0,n._)("div",r,[(0,n.Wm)(I,{imgUrl:b.userInfoStore.userInfo.avatar},null,8,["imgUrl"])]),(0,n._)("div",d,[(0,n._)("h5",u,(0,a.zw)(b.userInfoStore.userInfo.username),1),m])]),(0,n.Wm)(O,{modelValue:L.activeName,"onUpdate:modelValue":l[0]||(l[0]=e=>L.activeName=e),class:"demo-tabs",onTabClick:b.handleClick},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{label:"friendLinks",name:"friendLinks"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{links:L.friendLinks},null,8,["links"])])),_:1}),(0,n.Wm)(x,{label:"Config",name:"second"},{default:(0,n.w5)((()=>[(0,n.Uk)("Config")])),_:1}),(0,n.Wm)(x,{label:"Role",name:"third"},{default:(0,n.w5)((()=>[(0,n.Uk)("Role")])),_:1}),(0,n.Wm)(x,{label:"others",name:"fourth"},{default:(0,n.w5)((()=>[(0,n._)("ul",c,[(0,n._)("li",f,[(0,n.Wm)(C,{class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("log查看")])),_:1}),(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{href:"#/admin/log",target:"_blank"},{default:(0,n.w5)((()=>[(0,n.Uk)("log")])),_:1})])),_:1})]),(0,n._)("li",g,[(0,n.Wm)(C,{class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("对所有文章进行管理")])),_:1}),(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{href:"#/admin/allMarkdown",target:"_blank"},{default:(0,n.w5)((()=>[(0,n.Uk)("allMarkdown")])),_:1})])),_:1})]),(0,n._)("li",k,[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("选择需要展示的admin账户")])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(L.allAdminList,((e,l)=>((0,n.wg)(),(0,n.iD)("div",{class:"user",key:l},[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Wm)(S,{span:8},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{imgUrl:e.avatar},null,8,["imgUrl"])])),_:2},1024),(0,n.Wm)(S,{span:16},{default:(0,n.w5)((()=>[(0,n._)("div",_,[(0,n._)("div",p,[(0,n.Wm)(D,{class:"ml-2",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("id")])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.id),1)])),_:2},1024)]),(0,n._)("div",h,[(0,n.Wm)(D,{class:"ml-2",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("username")])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.username),1)])),_:2},1024)]),(0,n._)("div",w,[(0,n.Wm)(D,{class:"ml-2",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("email")])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.email),1)])),_:2},1024)]),(0,n._)("div",v,[(0,n.Wm)(D,{class:"ml-2",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("occupation")])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.occupation),1)])),_:2},1024)]),(0,n._)("div",U,[(0,n.Wm)(D,{class:"ml-2",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("word")])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.word),1)])),_:2},1024)])])])),_:2},1024)])),_:2},1024),(0,n._)("div",W,[(0,n.Wm)(z,{onClick:l=>b.operateAdminUser(e.email,"showInIndex")},{default:(0,n.w5)((()=>[(0,n.Uk)("setAsIndexUser")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})])),_:1},8,["modelValue","onTabClick"])])}s(4119);var b=s(8336),I=s(1112);const A=e=>((0,n.dD)("data-v-389da928"),e=e(),(0,n.Cn)(),e),x={class:"friendLinks"},C={class:"lim"},y=A((()=>(0,n._)("div",{class:"card"},null,-1))),z=A((()=>(0,n._)("div",{class:"card"},null,-1))),S=A((()=>(0,n._)("div",{class:"card"},null,-1)));function D(e,l,s,t,i,o){const r=(0,n.up)("el-text"),d=(0,n.up)("el-button"),u=(0,n.up)("el-link"),m=(0,n.up)("el-image");return(0,n.wg)(),(0,n.iD)("div",x,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.links,((l,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"card hvr-glow",key:s},[(0,n.Wm)(r,{tag:"b",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(l.title),1)])),_:2},1024),(0,n._)("div",C,[(0,n._)("span",null,[(0,n.Wm)(d,{round:""},{default:(0,n.w5)((()=>[(0,n.Uk)("id")])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(l.id),1)])),_:2},1024)]),(0,n._)("span",null,[(0,n.Wm)(d,{round:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{href:l.url,target:"_blank"},{default:(0,n.w5)((()=>[(0,n.Uk)("url")])),_:2},1032,["href"])])),_:2},1024),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(l.url),1)])),_:2},1024)]),(0,n.Wm)(m,{style:{width:"100px",height:"100px"},src:l.img,fit:e.fit},null,8,["src","fit"])])])))),128)),y,z,S])}var $={name:"FriendLinks",props:{links:{}},data(){return{linkList:[]}}},O=s(8696);const Z=(0,O.Z)($,[["render",D],["__scopeId","data-v-389da928"]]);var M=Z,T=s(9510),F={name:"Index",components:{FriendLinks:M,Avatar:b.Z},data(){return{isAdmin:!1,friendLinks:[],activeName:"friendLinks",allAdminList:{}}},computed:{userInfoStore(){return this.$store.state.user}},methods:{operateAdminUser(e,l){console.log("operateAdminUser"),console.log(`email:${e},operate:${l}`),T.Z.$axios({url:"/admin/operateUser",method:"POST",headers:{token:!0},data:{email:e,operate:l}}).then((e=>{console.log("res:"),console.log(e),this.alertMessage(e.message)})).catch((e=>{console.log("e:"),console.log(e)}))},getAllAdminUserInfo(){T.Z.$axios({url:"/admin/getAllAdminInfo",method:"POST",headers:{token:!0}}).then((e=>{this.allAdminList=e.result})).catch((e=>{console.log("e:"),console.log(e)}))},initLinks(){T.Z.$axios({url:"/admin/friendLinks",method:"POST",headers:{token:!0}}).then((e=>{console.log("res:"),console.log(e),this.alertMessage(e.message),e.success?this.friendLinks=e.result:console.log("error")})).catch((e=>{console.log("e:"),console.log(e)}))},handleClick(e,l){console.log(e.props.name),"friendLinks"==e.props.name&&(console.log("friendLinks clicked"),this.initFriendLinks())},initFriendLinks(){JSON.stringify(this.friendLinks).length>10||this.initLinks()},alertMessage(e,l,s){const a=s||"red";(0,I.z8)({message:(0,n.h)("p",null,[(0,n.h)("span",null,e),(0,n.h)("i",{style:`color: ${a}`},l)])})},initData(){console.log("store中的数据:"),console.log(this.userInfoStore);const e=JSON.parse(localStorage.getItem("userInfo"));e.email.length>0?T.Z.$axios({url:"/user/isAdmin",method:"POST",headers:{token:!0}}).then((e=>{this.alertMessage(e.message),console.log("是否为admin用户::"),console.log(e.result),this.isAdmin=e.result,e.result||this.$router.push("/login")})).catch((e=>{console.log("e:"),console.log(e)})):this.$router.push("/login")}},created(){this.initData(),this.initLinks(),this.getAllAdminUserInfo()}};const N=(0,O.Z)(F,[["render",L],["__scopeId","data-v-d0def9f0"]]);var P=N}}]);
//# sourceMappingURL=96.c21e5064.js.map