"use strict";(self.webpackChunkblogfront=self.webpackChunkblogfront||[]).push([[527],{7527:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var o=s(4535),a=s(60);const l={class:"noteList"},n={class:"btns"},i={class:"left noteLim"},d={class:"newNote"},u={class:"noteListLim"},r={class:"list-group list-group-flush"},m={key:0,class:"right noteLim"},c={class:"imageLim"};var h=s(9510),w=s(659),p=s(1112);const f={class:"noteListItem"},_={class:"icon"},v=["src"];t={name:"NoteListItem",props:{item:{type:Object},showNote:{type:Function,default:()=>{}}},data(){},methods:{addNewChildrenNote(e){}}},s=s(8696);var N=(0,s.Z)({name:"noteList",components:{NoteListItem:(0,s.Z)(t,[["render",function(e,t,s,l,n,i){const d=(0,o.up)("el-col"),u=(0,o.up)("el-text");var r=(0,o.up)("el-row");const m=(0,o.up)("ArrowRight"),c=(0,o.up)("el-icon"),h=(0,o.up)("el-button"),w=(0,o.up)("More"),p=(0,o.up)("Plus");return(0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{span:4},{default:(0,o.w5)((()=>[(0,o._)("div",_,[(0,o._)("img",{src:s.item.icon,alt:""},null,8,v)])])),_:1}),(0,o.Wm)(d,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{truncated:"",onClick:t[0]||(t[0]=e=>s.showNote(s.item.id)),class:"hvr-shadow"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(s.item.note_title),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(r,{class:"iconList"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{link:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{link:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{link:"",onClick:t[1]||(t[1]=e=>i.addNewChildrenNote(s.item))},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1})])),_:1})])),_:1})])),_:1})])}],["__scopeId","data-v-406e474f"]])},data(){return{notesList:[],title:"",noteData:{},showRight:!1,nowId:"",drawer:!1}},created(){this.initNotesList()},methods:{shareNote(e){},submitChildrenNote(e,t){h.Z.$axios({url:"/"})},addNewChildrenNote(e){w.T.prompt(`将会在 ${e.note_title} 下新建笔记`,"新建一个笔记",{confirmButtonText:"就这个了",cancelButtonText:"算了",inputPattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]{4,10}/,inputErrorMessage:"只能是数字,字母,特殊字符",inputValidator:e=>!0}).then((({value:t})=>{var s=e["id"];this.submitChildrenNote(t,s),(0,p.z8)({type:"success",message:"Your email is:"+t})})).catch((()=>{(0,p.z8)({type:"info",message:"Input canceled"})}))},alertMessage(e,t,s){s=s||"red",(0,p.z8)({message:(0,o.h)("p",null,[(0,o.h)("span",null,e),(0,o.h)("i",{style:"color: "+s},t)]),grouping:!0})},getItemId(e){this.showNote(e)},saveNote(){h.Z.$axios({url:"/note/saveNote",method:"POST",headers:{token:!0},data:{id:this.noteData.id,data:this.noteData}}).then((e=>{this.initNotesList(),this.alertMessage(e.message,"success","#a1c4fd")})).catch((e=>{}))},async handleEvent(e){83===e.keyCode&&(e.preventDefault(),e.returnValue=!1,this.saveNote())},showNote(e){this.nowId=e,h.Z.$axios({url:"/note/getNote",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{e.success&&(null==e.result.content&&(e.result.content="> type your first title!"),this.noteData=e.result)})).catch((e=>{}))},submitNewNote(){h.Z.$axios({url:"/note/addNote",method:"POST",headers:{token:!0},data:{note_title:this.title}}).then((e=>{e.success&&(this.initNotesList(),this.title="")})).catch((e=>{}))},initNotesList(){h.Z.$axios({url:"/note/allNotes",method:"POST",headers:{token:!0}}).then((e=>{e.success&0!=e.result.length?(this.showRight=!0,this.notesList=e.result,this.notesList[0].id&&(this.nowId?this.showNote(this.nowId):this.showNote(this.notesList[0].id))):(this.alertMessage(e.message,"数据渲染失败咯","#a1c4fd"),this.showRight=!1)}))}},mounted(){window.addEventListener("keydown",this.handleEvent)},beforeDestroy(){window.removeEventListener("keydown",this.handleEvent)}},[["render",function(e,t,s,h,w,p){const f=(0,o.up)("el-button"),_=(0,o.up)("el-input"),v=(0,o.up)("el-text"),N=(0,o.up)("el-divider"),g=(0,o.up)("NoteListItem");var k=(0,o.up)("el-drawer"),W=(0,o.up)("v-md-editor");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",n,[(0,o.Wm)(f,{type:"primary",onClick:t[0]||(t[0]=e=>w.drawer=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("check all")])),_:1}),(0,o.Wm)(_,{class:"m-r",modelValue:w.noteData.note_title,"onUpdate:modelValue":t[1]||(t[1]=e=>w.noteData.note_title=e),placeholder:"Please input"},null,8,["modelValue"]),(0,o.Wm)(f,{type:"primary",onClick:t[2]||(t[2]=e=>p.shareNote(w.nowId))},{default:(0,o.w5)((()=>[(0,o.Uk)("share")])),_:1})]),(0,o.Wm)(k,{modelValue:w.drawer,"onUpdate:modelValue":t[5]||(t[5]=e=>w.drawer=e),size:"25%",direction:"ltr",title:"I am the title","with-header":!1},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Uk)("my note list")])),_:1}),(0,o._)("div",i,[(0,o._)("div",d,[(0,o.Wm)(_,{modelValue:w.title,"onUpdate:modelValue":t[3]||(t[3]=e=>w.title=e),placeholder:"新建一个"},null,8,["modelValue"]),(0,o.Wm)(f,{onClick:t[4]||(t[4]=e=>p.submitNewNote())},{default:(0,o.w5)((()=>[(0,o.Uk)(" 提交 ")])),_:1})]),(0,o.Wm)(N),(0,o._)("div",u,[(0,o._)("ul",r,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.notesList,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item",key:t},[(0,o.Wm)(g,{item:e,showNote:p.getItemId},null,8,["item","showNote"])])))),128))])])])])),_:1},8,["modelValue"]),w.showRight?((0,o.wg)(),(0,o.iD)("div",m,[(0,o.Wm)(W,{"include-level":[3,4],onSave:p.saveNote,modelValue:w.noteData.content,"onUpdate:modelValue":t[6]||(t[6]=e=>w.noteData.content=e),"disabled-menus":[]},null,8,["onSave","modelValue"])])):(0,o.kq)("",!0),(0,o._)("div",c,[(0,o._)("div",{class:"cover",style:(0,a.j5)({backgroundImage:"url("+w.noteData.cover+")",backgroundRepeat:"no-repeat"})},null,4)])])}],["__scopeId","data-v-64f8cc01"]])}}]);