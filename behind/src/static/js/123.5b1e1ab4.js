"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[123],{4123:function(e,l,o){o.r(l),o.d(l,{default:function(){return p}});var s=o(4535),a=o(5353),n=o(5448),c=o(1112),t=o(9510);const r=e=>((0,s.dD)("data-v-ebfdc4ee"),e=e(),(0,s.Cn)(),e),u={class:"headImg container"},i={class:"upload"},d=r((()=>(0,s._)("form",{action:"/file/avatar"},null,-1))),g={class:"demo-image__lazy"};var v={__name:"HeadImg",setup(e){const l=(0,n.oR)(),o=(0,a.iH)([]),r=l.state.user.userInfo.token,v=(0,a.iH)([]);console.log(l.state.user.userInfo),(0,s.bv)((()=>{f()}));const f=()=>{t.Z.$axios({url:"/user/headImg",method:"POST",headers:{token:!0}}).then((e=>{console.log("res:"),console.log(e),e.success&&(o.value=e.result,v.value=o.value.map((e=>e.url)))})).catch((e=>{console.log("e:"),console.log(e)}))},m=async()=>{console.log("handleAvatarSuccess");await t.Z.$axios({url:"/user/getUserInfByToken",method:"POST",headers:{token:!0}});f()},p=e=>(console.log("rawFile"),console.log(e),console.log("rawFile.size"),console.log(e.size),e.size<=2e6?(c.z8.success("上传成功"),!0):(c.z8.error("请选择2mb大小以下的图片"),!1));return(e,l)=>{const n=(0,s.up)("el-text"),c=(0,s.up)("Plus"),t=(0,s.up)("el-icon"),f=(0,s.up)("el-upload"),h=(0,s.up)("el-image");return(0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",i,[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" 或者你可以上传图片: ")])),_:1}),(0,s.Wm)(f,{class:"avatar-uploader",data:{token:(0,a.SU)(r)},action:"/file/headImg","show-file-list":!0,"on-success":m,"before-upload":p},{default:(0,s.w5)((()=>[(0,s.Wm)(t,{class:"avatar-uploader-icon"},{default:(0,s.w5)((()=>[(0,s.Wm)(c)])),_:1})])),_:1},8,["data"]),d]),(0,s._)("div",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.value,((e,l)=>((0,s.wg)(),(0,s.iD)("div",{key:l,class:"demo-image__preview"},[(0,s.Wm)(h,{src:e.url,lazy:"",fit:"cover","preview-src-list":v.value,"initial-index":l,"hide-on-click-modal":!0,"close-on-press-escape":!0},null,8,["src","preview-src-list","initial-index"])])))),128))])])}}},f=o(8696);const m=(0,f.Z)(v,[["__scopeId","data-v-ebfdc4ee"]]);var p=m}}]);
//# sourceMappingURL=123.5b1e1ab4.js.map