"use strict";(self.webpackChunkblogfront=self.webpackChunkblogfront||[]).push([[50],{4050:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var l=s(6419),o=s(3909);const a={class:"noteList"},n={class:"left noteLim"},i={class:"btns"},d={key:0,class:"newNote"},u={class:"noteListLim"},h={class:"list-group list-group-flush"},r={class:"icon"},c=["src"],m={key:0,class:"right noteLim"},w={class:"imageLim"};var p=s(9510),f=s(4668),_=s(7347),g=(t={name:"noteList",data(){return{notesList:[],title:"",showBtns:!1,noteData:{},showRight:!1,nowId:""}},created(){this.initNotesList()},methods:{submitChildrenNote(e,t){p.Z.$axios({url:"/"})},addNewChildrenNote(e){f.T.prompt(`将会在 ${e.note_title} 下新建笔记`,"新建一个笔记",{confirmButtonText:"就这个了",cancelButtonText:"算了",inputPattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]{4,10}/,inputErrorMessage:"只能是数字,字母,特殊字符",inputValidator:e=>!0}).then((({value:t})=>{var s=e["id"];this.submitChildrenNote(t,s),(0,_.z8)({type:"success",message:"Your email is:"+t})})).catch((()=>{(0,_.z8)({type:"info",message:"Input canceled"})}))},alertMessage(e,t,s){s=s||"red",(0,_.z8)({message:(0,l.h)("p",null,[(0,l.h)("span",null,e),(0,l.h)("i",{style:"color: "+s},t)])})},saveNote(){p.Z.$axios({url:"/note/saveNote",method:"POST",headers:{token:!0},data:{id:this.noteData.id,data:this.noteData}}).then((e=>{this.initNotesList(),this.alertMessage(e.message,"success","#a1c4fd")})).catch((e=>{}))},async handleEvent(e){83===e.keyCode&&(e.preventDefault(),e.returnValue=!1,this.saveNote())},showNote(e){this.nowId=e,p.Z.$axios({url:"/note/getNote",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{e.success&&(this.noteData=e.result)})).catch((e=>{}))},submitNewNote(){p.Z.$axios({url:"/note/addNote",method:"POST",headers:{token:!0},data:{note_title:this.title}}).then((e=>{e.success&&(this.initNotesList(),this.title="")})).catch((e=>{}))},showAddNewNote(){this.showBtns=!this.showBtns},initNotesList(){p.Z.$axios({url:"/note/allNotes",method:"POST",headers:{token:!0}}).then((e=>{e.success&0!=e.result.length?(this.showRight=!0,this.notesList=e.result,this.notesList[0].id&&(this.nowId?this.showNote(this.nowId):this.showNote(this.notesList[0].id))):(this.alertMessage(e.message,"数据渲染失败咯","#a1c4fd"),this.showRight=!1)}))}},mounted(){window.addEventListener("keydown",this.handleEvent)},beforeDestroy(){window.removeEventListener("keydown",this.handleEvent)}},(0,s(8390).Z)(t,[["render",function(e,t,s,p,f,_){const g=(0,l.up)("Plus"),v=(0,l.up)("el-icon"),k=(0,l.up)("el-button"),N=(0,l.up)("el-input"),W=(0,l.up)("el-divider"),L=(0,l.up)("el-col"),D=(0,l.up)("el-text"),b=(0,l.up)("el-row"),C=(0,l.up)("ArrowRight"),y=(0,l.up)("More"),V=(0,l.up)("v-md-editor");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(L,{span:3},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",i,[(0,l.Wm)(k,{onClick:t[0]||(t[0]=e=>_.showAddNewNote())},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g)])),_:1})])),_:1})]),f.showBtns?((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(N,{modelValue:f.title,"onUpdate:modelValue":t[1]||(t[1]=e=>f.title=e),placeholder:"Please input"},null,8,["modelValue"]),(0,l.Wm)(k,{onClick:t[2]||(t[2]=e=>_.submitNewNote())},{default:(0,l.w5)((()=>[(0,l.Uk)(" 提交 ")])),_:1})])):(0,l.kq)("",!0),(0,l.Wm)(W),(0,l._)("div",u,[(0,l._)("ul",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.notesList,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{class:"list-group-item",key:t},[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(L,{span:4},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("img",{src:e.icon,alt:""},null,8,c)])])),_:2},1024),(0,l.Wm)(L,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{truncated:"",onClick:t=>_.showNote(e.id),class:"hvr-shadow"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.note_title),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(b,{class:"iconList"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{link:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(L,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{link:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(L,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{link:"",onClick:t=>_.addNewChildrenNote(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])))),128))])])])])),_:1}),(0,l.Wm)(L,{span:21},{default:(0,l.w5)((()=>[f.showRight?((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("div",w,[(0,l._)("div",{class:"cover",style:(0,o.j5)({backgroundImage:"url("+f.noteData.cover+")",backgroundRepeat:"no-repeat"})},null,4)]),(0,l.Wm)(N,{modelValue:f.noteData.note_title,"onUpdate:modelValue":t[3]||(t[3]=e=>f.noteData.note_title=e),placeholder:"Please input"},null,8,["modelValue"]),(0,l.Wm)(W,{"content-position":"left"},{default:(0,l.w5)((()=>[(0,l.Uk)("Life is too long to end at a grave")])),_:1}),(0,l.Wm)(V,{"include-level":[3,4],onSave:_.saveNote,modelValue:f.noteData.content,"onUpdate:modelValue":t[4]||(t[4]=e=>f.noteData.content=e),"disabled-menus":[]},null,8,["onSave","modelValue"])])):(0,l.kq)("",!0)])),_:1})])),_:1})])}],["__scopeId","data-v-6db5dd31"]]))}}]);