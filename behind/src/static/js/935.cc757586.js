"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[935],{9935:function(e,t,o){o.r(t),o.d(t,{default:function(){return C}});var l=o(4535),s=o(60);const a=e=>((0,l.dD)("data-v-6b635ffe"),e=e(),(0,l.Cn)(),e),n={class:"noteList"},i={class:"btns"},d=a((()=>(0,l._)("br",null,null,-1))),u={class:"left noteLim"},r={class:"newNote"},c={class:"noteListLim"},h={class:"list-group list-group-flush"},m={key:0,class:"right noteLim"},w={class:"imageLim"};function g(e,t,o,a,g,p){const f=(0,l.up)("el-button"),k=(0,l.up)("el-input"),_=(0,l.up)("el-text"),N=(0,l.up)("el-drawer"),v=(0,l.up)("el-divider"),D=(0,l.up)("NoteListItem"),W=(0,l.up)("v-md-editor");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",i,[(0,l.Wm)(f,{onClick:t[0]||(t[0]=e=>g.drawer=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("check all")])),_:1}),(0,l.Wm)(k,{class:"m-r",modelValue:g.noteData.note_title,"onUpdate:modelValue":t[1]||(t[1]=e=>g.noteData.note_title=e),placeholder:"Please input"},null,8,["modelValue"]),(0,l.Wm)(f,{onClick:t[2]||(t[2]=e=>g.showDrawer=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("share")])),_:1}),g.noteData.allowView?((0,l.wg)(),(0,l.j4)(_,{key:0},{default:(0,l.w5)((()=>[(0,l.Uk)("公开分享")])),_:1})):((0,l.wg)(),(0,l.j4)(_,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)("没有公开分享")])),_:1})),g.noteData.allowView?((0,l.wg)(),(0,l.j4)(f,{key:2,onClick:t[3]||(t[3]=e=>p.goToShareLink(g.noteData.id))},{default:(0,l.w5)((()=>[(0,l.Uk)("check share link ")])),_:1})):(0,l.kq)("",!0)]),(0,l.Wm)(N,{modelValue:g.showDrawer,"onUpdate:modelValue":t[4]||(t[4]=e=>g.showDrawer=e),title:"是否分享你的笔记",size:"50%"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Uk)(' noteData: { "id": 6, "note_title": "面试说的话", "allowView": 0, "content": "> type your first title!", "cover": "/images/cover/1.png", "icon": "/images/icon/default.png", "allowComment": 0, "allowEditUserList": null } '),d,(0,l.Uk)(" "+(0,s.zw)(g.noteData)+" ",1),(0,l.Wm)(f,{"@click":p.shareNoteById(g.noteData.id)},{default:(0,l.w5)((()=>[(0,l.Uk)("share")])),_:1},8,["@click"])])])),_:1},8,["modelValue"]),(0,l.Wm)(N,{modelValue:g.drawer,"onUpdate:modelValue":t[7]||(t[7]=e=>g.drawer=e),size:"25%",direction:"ltr",title:"I am the title","with-header":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Uk)("my note list")])),_:1}),(0,l._)("div",u,[(0,l._)("div",r,[(0,l.Wm)(k,{modelValue:g.title,"onUpdate:modelValue":t[5]||(t[5]=e=>g.title=e),placeholder:"新建一个"},null,8,["modelValue"]),(0,l.Wm)(f,{onClick:t[6]||(t[6]=e=>p.submitNewNote())},{default:(0,l.w5)((()=>[(0,l.Uk)(" 提交 ")])),_:1})]),(0,l.Wm)(v),(0,l._)("div",c,[(0,l._)("ul",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.notesList,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{class:"list-group-item",key:t},[(0,l.Wm)(D,{item:e,showNote:p.getItemId},null,8,["item","showNote"])])))),128))])])])])),_:1},8,["modelValue"]),g.showRight?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(W,{"include-level":[3,4],onSave:p.saveNote,modelValue:g.noteData.content,"onUpdate:modelValue":t[8]||(t[8]=e=>g.noteData.content=e),"disabled-menus":[]},null,8,["onSave","modelValue"])])):(0,l.kq)("",!0),(0,l._)("div",w,[(0,l._)("div",{class:"cover",style:(0,s.j5)({backgroundImage:"url("+g.noteData.cover+")",backgroundRepeat:"no-repeat"})},null,4)])])}var p=o(9510),f=o(659),k=o(1112);const _={class:"noteListItem"},N={class:"icon"},v=["src"];function D(e,t,o,a,n,i){const d=(0,l.up)("el-col"),u=(0,l.up)("el-text"),r=(0,l.up)("el-row"),c=(0,l.up)("ArrowRight"),h=(0,l.up)("el-icon"),m=(0,l.up)("el-button"),w=(0,l.up)("More"),g=(0,l.up)("Plus");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{span:4},{default:(0,l.w5)((()=>[(0,l._)("div",N,[(0,l._)("img",{src:o.item.icon,alt:""},null,8,v)])])),_:1}),(0,l.Wm)(d,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{truncated:"",onClick:t[0]||(t[0]=e=>o.showNote(o.item.id)),class:"hvr-shadow"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.item.note_title),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(r,{class:"iconList"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{link:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(d,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{link:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(d,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{link:"",onClick:t[1]||(t[1]=e=>i.addNewChildrenNote(o.item))},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g)])),_:1})])),_:1})])),_:1})])),_:1})])}var W={name:"NoteListItem",props:{item:{type:Object},showNote:{type:Function,default:()=>{}}},data(){},methods:{addNewChildrenNote(e){console.log("addNewChildrenNote"),console.log(e)}}},L=o(8696);const b=(0,L.Z)(W,[["render",D],["__scopeId","data-v-406e474f"]]);var y=b,V={name:"noteList",components:{NoteListItem:y},data(){return{notesList:[],title:"",noteData:{},showRight:!1,nowId:"",drawer:!1,showDrawer:!1}},created(){this.initNotesList()},methods:{goToShareLink(e){console.log(`分享id:${e}`)},shareNoteById(e){console.log(`将要分享的id:${e}`),p.Z.$axios({url:"/note/publicNote",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{this.alertMessage(e.message)})).catch((e=>{this.alertMessage(e)}))},submitChildrenNote(e,t){p.Z.$axios({url:"/"})},addNewChildrenNote(e){console.log("---addNewChildrenNote---"),console.log("obj;"),console.log(e),f.T.prompt(`将会在 ${e.note_title} 下新建笔记`,"新建一个笔记",{confirmButtonText:"就这个了",cancelButtonText:"算了",inputPattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]{4,10}/,inputErrorMessage:"只能是数字,字母,特殊字符",inputValidator:e=>!0}).then((({value:t})=>{const{id:o}=e;console.log(o),this.submitChildrenNote(t,o),(0,k.z8)({type:"success",message:`Your email is:${t}`})})).catch((()=>{(0,k.z8)({type:"info",message:"Input canceled"})}))},alertMessage(e,t,o){const s=o||"red";(0,k.z8)({message:(0,l.h)("p",null,[(0,l.h)("span",null,e),(0,l.h)("i",{style:`color: ${s}`},t)]),grouping:!0})},getItemId(e){this.showNote(e)},saveNote(){console.log("this.noteData"),console.log(this.noteData),p.Z.$axios({url:"/note/saveNote",method:"POST",headers:{token:!0},data:{id:this.noteData.id,data:this.noteData}}).then((e=>{console.log(e.message),this.initNotesList(),this.alertMessage(e.message,"success","#a1c4fd")})).catch((e=>{console.log("失败"),console.log(e)}))},async handleEvent(e){switch(e.keyCode){case 83:e.preventDefault(),e.returnValue=!1,this.saveNote();break}},showNote(e){this.nowId=e,p.Z.$axios({url:"/note/getNote",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{e.success?null==e.result.content?(e.result.content="> type your first title!",this.noteData=e.result):this.noteData=e.result:console.log("笔记获取失败")})).catch((e=>{console.log(e)}))},submitNewNote(){console.log("submitNewNote"),p.Z.$axios({url:"/note/addNote",method:"POST",headers:{token:!0},data:{note_title:this.title}}).then((e=>{console.log("res:"),console.log(e),e.success&&(this.initNotesList(),this.title="")})).catch((e=>{console.log("e:"),console.log(e)}))},initNotesList(){p.Z.$axios({url:"/note/allNotes",method:"POST",headers:{token:!0}}).then((e=>{console.log("res.result:"),console.log(e.result),console.log(e.result.length),e.success&0!=e.result.length?(this.showRight=!0,this.notesList=e.result,this.notesList[0].id&&(this.nowId?this.showNote(this.nowId):this.showNote(this.notesList[0].id))):(this.alertMessage(e.message,"数据渲染失败咯","#a1c4fd"),this.showRight=!1)}))}},mounted(){window.addEventListener("keydown",this.handleEvent)},beforeDestroy(){window.removeEventListener("keydown",this.handleEvent)}};const I=(0,L.Z)(V,[["render",g],["__scopeId","data-v-6b635ffe"]]);var C=I}}]);
//# sourceMappingURL=935.cc757586.js.map