"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[922],{9922:function(e,a,t){t.r(a),t.d(a,{default:function(){return u}});var l=t(4535);const o={class:"vEdit"};function d(e,a,t,d,n,r){const i=(0,l.up)("v-md-editor"),m=(0,l.up)("el-input"),s=(0,l.up)("el-form-item"),u=(0,l.up)("el-form"),c=(0,l.up)("el-button"),w=(0,l.up)("el-drawer");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(i,{"include-level":[3,4,5],onSave:a[0]||(a[0]=e=>n.drawer=!0),modelValue:n.markdownData.content,"onUpdate:modelValue":a[1]||(a[1]=e=>n.markdownData.content=e),"disabled-menus":[],onUploadImage:r.handleUploadImage},null,8,["modelValue","onUploadImage"]),(0,l.Wm)(w,{modelValue:n.drawer,"onUpdate:modelValue":a[8]||(a[8]=e=>n.drawer=e),title:"填写关于该文章的其他信息",size:"70%",direction:"ttb","with-header":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:"文章标题","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.title,"onUpdate:modelValue":a[2]||(a[2]=e=>n.markdownData.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"文章描述","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.description,"onUpdate:modelValue":a[3]||(a[3]=e=>n.markdownData.description=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"文章tag1","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.tag1,"onUpdate:modelValue":a[4]||(a[4]=e=>n.markdownData.tag1=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"文章tag2","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.tag2,"onUpdate:modelValue":a[5]||(a[5]=e=>n.markdownData.tag2=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"文章tag3","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.tag3,"onUpdate:modelValue":a[6]||(a[6]=e=>n.markdownData.tag3=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(c,{onClick:a[7]||(a[7]=e=>n.drawer=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("再想想")])),_:1}),(0,l.Wm)(c,{type:"primary",onClick:r.submit},{default:(0,l.w5)((()=>[(0,l.Uk)("提交")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])}var n=t(9510),r=t(1112),i={name:"Vedit",created(){this.initMarkdownData()},data(){return{id:0,markdownData:{content:"> hello world!\n\ntype you first line code\n",title:"请输入你的标题",description:"这是我新建的文章",tag1:"",tag2:"",tag3:""},drawer:!1,toolbar:{customToolbar1:{title:"基础工具栏",icon:"v-md-icon-tip",action(e){e.insert((function(e){const a="(((",t=")))",l="请输入文本",o=e||l;return{text:`${a}${o}${t}`,selected:o}}))}}}}},methods:{handleUploadImage(e,a,t){console.log("files"),console.log(t);let l=new FormData;l.append("file",t),a({url:"/images/2.png",desc:"回显图片名称"})},initMarkdownData(){this.id=this.$route.query.id||"0",0==this.id||n.Z.$axios({url:"/markdownFile/getData",method:"POST",headers:{token:!0},data:{id:this.id}}).then((e=>{this.markdownData=e.result})).catch((e=>{this.alertMessage(e)}))},submit(){0==this.id?n.Z.$axios({url:"/new/markdown",method:"POST",headers:{token:!0},data:this.markdownData}).then((e=>{this.drawer=!1,e.success&&this.alertMessage(e.message)})).catch((e=>{this.alertMessage(e)})):n.Z.$axios({url:"/markdownFile/update",method:"POST",headers:{token:!0},data:{markdownData:this.markdownData}}).then((e=>{this.drawer=!1,e.success&&(this.alertMessage("数据更新","success","#a1c4fd"),this.initMarkdownData())})).catch((e=>{this.alertMessage("保存失败",e)}))},alertMessage(e,a,t){const o=t||"red";(0,r.z8)({message:(0,l.h)("p",null,[(0,l.h)("span",null,e),(0,l.h)("i",{style:`color: ${o}`},a)])})}}},m=t(8696);const s=(0,m.Z)(i,[["render",d],["__scopeId","data-v-321a2065"]]);var u=s}}]);
//# sourceMappingURL=922.4f687db5.js.map