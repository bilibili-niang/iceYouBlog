"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[994],{2688:function(e,t){const a={timeFormat:function(e){const t=new Date(e),a=t.getFullYear(),l=(t.getMonth()+1+"").padStart(2,"0"),n=(t.getDate()+"").padStart(2,"0"),o=(t.getHours()+"").padStart(2,"0"),s=(t.getMinutes()+"").padStart(2,"0"),i=(t.getSeconds()+"").padStart(2,"0");return`${a}-${l}-${n} ${o}:${s}:${i}`}};t["Z"]=a},536:function(e,t,a){a.d(t,{Z:function(){return r}});var l=a(4535),n=a(60);const o={class:"markdownTags"};function s(e,t,a,s,i,d){const m=(0,l.up)("el-tag"),r=(0,l.up)("el-link");return(0,l.wg)(),(0,l.iD)("div",o,[a.click?((0,l.wg)(),(0,l.j4)(r,{key:0,href:i.href,target:"_blank",underline:!1},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.tag),1)])),_:1})])),_:1},8,["href"])):(0,l.kq)("",!0),a.click?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.tag),1)])),_:1}))])}var i={name:"markdownTags",props:{tag:"",click:{type:Boolean,default:!0}},data(){return{href:""}},created(){this.href="#/read/readTag?tag1="+this.tag}},d=a(8696);const m=(0,d.Z)(i,[["render",s]]);var r=m},9439:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(4535),n=a(60);const o={class:"aComment hvr-glow p-l p-l"},s={class:"avatar m-r"},i={class:"detail"},d={class:"f-r"},m={class:"m-r"},r={key:0},c={key:1};function u(e,t,a,u,w,g){const p=(0,l.up)("el-divider"),k=(0,l.up)("Avatar"),f=(0,l.up)("el-tag"),h=(0,l.up)("el-text"),v=(0,l.up)("v-md-editor");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(p,{"content-position":"left"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.item.id),1)])),_:1}),(0,l._)("div",o,[(0,l._)("div",s,[(0,l.Wm)(k,{imgUrl:w.avatar},null,8,["imgUrl"])]),(0,l._)("div",i,[(0,l._)("div",d,[(0,l._)("div",m,[(0,l.Wm)(f,{class:"ml-2 m-r",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("nickName")])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.item.nickName),1)])),_:1})]),a.item.email?((0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(f,{class:"ml-2 m-r",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("email")])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.item.email),1)])),_:1})])):(0,l.kq)("",!0),a.item.webSite?((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(f,{class:"ml-2 m-r",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("webSite")])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.item.webSite),1)])),_:1})])):(0,l.kq)("",!0)]),(0,l.Wm)(v,{"left-toolbar":"","include-level":[3,4],mode:"preview",modelValue:a.item.content,"onUpdate:modelValue":t[0]||(t[0]=e=>a.item.content=e)},null,8,["modelValue"])])])],64)}var w=a(9510),g=a(8336),p={name:"Acomment",components:{Avatar:g.Z},props:{item:{}},data(){return{avatar:"/images/avatars/defaultAvatar.png"}},created(){const e=this.item.email||null;e?(console.log(`请求${e}的头像`),w.Z.$axios({url:"/user/getUserInfoByEmail/",method:"POST",data:{email:e}}).then((e=>{console.log("res:"),console.log(e),this.avatar=e.result.avatar})).catch((e=>{console.log("e:"),console.log(e)}))):console.log("使用默认头像")}},k=a(8696);const f=(0,k.Z)(p,[["render",u],["__scopeId","data-v-13e62059"]]);var h=f},4930:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(4535),n=a(60);const o={class:"comment"},s={class:"dialog-footer"};function i(e,t,a,i,d,m){const r=(0,l.up)("v-md-editor"),c=(0,l.up)("el-text"),u=(0,l.up)("el-button"),w=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(r,{"left-toolbar":"undo redo","include-level":[3,4],onSave:t[0]||(t[0]=e=>m.save()),modelValue:d.content,"onUpdate:modelValue":t[1]||(t[1]=e=>d.content=e)},null,8,["modelValue"]),(0,l.Wm)(w,{modelValue:d.dialogFormVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>d.dialogFormVisible=e),title:"留言一下"},{footer:(0,l.w5)((()=>[(0,l._)("span",s,[(0,l.Wm)(u,{onClick:t[2]||(t[2]=e=>d.dialogFormVisible=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(u,{type:"primary",onClick:m.submit},{default:(0,l.w5)((()=>[(0,l.Uk)("提交")])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)("为"),(0,l.Wm)(c,{tag:"b"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.title),1)])),_:1}),(0,l.Uk)("留言")])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(u,{onClick:t[4]||(t[4]=e=>d.dialogFormVisible=!0),class:"m-t"},{default:(0,l.w5)((()=>[(0,l.Uk)("submit")])),_:1})])}var d=a(9510),m=a(1112),r=a(9439),c={components:{Acomment:r.Z},props:{id:"",title:{},type:{},content:"",user:{}},data(){return{content:"> 支持markdown",dialogFormVisible:!1,oldId:0}},methods:{save(){this.dialogFormVisible=!0},submit(){console.log("save clicked"),d.Z.$axios({url:"/comment/addComment",method:"POST",headers:{token:!0},data:{id:this.id,type:this.type,content:this.content,user:this.user}}).then((e=>{this.open2(e.message)})).catch((e=>{console.log("e:"),console.log(e)})),this.dialogFormVisible=!1},open2(e){(0,m.z8)({showClose:!0,message:e,type:"success"})}},watch:{id(e){this.oldId=e}}},u=a(8696);const w=(0,u.Z)(c,[["render",i],["__scopeId","data-v-d9a6117c"]]);var g=w},6483:function(e,t,a){a.d(t,{Z:function(){return w}});var l=a(4535);const n={class:"commentArea"},o={key:0,class:"havComment"},s={key:1,class:"commentList"};function i(e,t,a,i,d,m){const r=(0,l.up)("el-text"),c=(0,l.up)("Acomment");return(0,l.wg)(),(0,l.iD)("div",n,[d.commentFlag?((0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" 暂无评论 ")])),_:1})])):(0,l.kq)("",!0),d.commentFlag?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.commentList,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.Wm)(c,{item:e},null,8,["item"])])))),128))]))])}var d=a(9510),m=a(9439),r={name:"CommentArea",components:{Acomment:m.Z},props:{id:0,refresh:{type:Boolean}},data(){return{commentList:[],commentFlag:!0}},methods:{getAllComment(e){d.Z.$axios({url:"/comment/getCommentById",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{this.commentList=e.result,this.commentList.length&&(this.commentFlag=!1)})).catch((e=>{console.log("e:"),console.log(e)}))}},created(){this.getAllComment(this.id)},watch:{id(e){this.oldId=e,console.log("子组件的id发生变化"),this.getAllComment(this.oldId)}}},c=a(8696);const u=(0,c.Z)(r,[["render",i]]);var w=u},7994:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var l=a(4535);const n=e=>((0,l.dD)("data-v-2034f55c"),e=e(),(0,l.Cn)(),e),o={class:"read"},s={key:0},i={key:1,class:"dataContainer"},d={class:"imgLim animation-time"},m=["src"],r={key:1,src:"/images/cover/1.png",alt:""},c=n((()=>(0,l._)("div",{class:"img"},null,-1))),u={class:"articleCon"},w={class:"commentUserInf m-b f-c"};function g(e,t,a,n,g,p){const k=(0,l.up)("indexCard"),f=(0,l.up)("v-md-editor"),h=(0,l.up)("el-tag"),v=(0,l.up)("el-col"),_=(0,l.up)("el-input"),D=(0,l.up)("el-row"),W=(0,l.up)("comment"),U=(0,l.up)("el-collapse-item"),y=(0,l.up)("CommentArea"),b=(0,l.up)("el-collapse");return(0,l.wg)(),(0,l.iD)("div",o,[g.dataExist?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",s," 文章不存在或已被删除 ")),g.dataExist?((0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",d,[g.markdownData.headImg?((0,l.wg)(),(0,l.iD)("img",{key:0,src:g.markdownData.headImg,alt:""},null,8,m)):(0,l.kq)("",!0),g.markdownData.headImg?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("img",r)),c]),(0,l.Wm)(k,{showEditBtn:g.showEditBtn,title:g.markdownData.title,markdownData:g.markdownData,userInf:g.userInf},null,8,["showEditBtn","title","markdownData","userInf"]),(0,l._)("div",u,[(0,l.Wm)(f,{"include-level":[3,4],modelValue:g.markdownData.content,"onUpdate:modelValue":t[0]||(t[0]=e=>g.markdownData.content=e),mode:"preview",onCopyCodeSuccess:p.handleCopyCodeSuccess},null,8,["modelValue","onCopyCodeSuccess"])])])):(0,l.kq)("",!0),(0,l.Wm)(b,{modelValue:g.activeName,"onUpdate:modelValue":t[3]||(t[3]=e=>g.activeName=e),accordion:""},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{title:"友善地评论",name:"1"},{default:(0,l.w5)((()=>[(0,l._)("div",w,[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"ml-2",type:"info",cal:""},{default:(0,l.w5)((()=>[(0,l.Uk)("你的名字")])),_:1})])),_:1}),(0,l.Wm)(v,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{modelValue:g.commentUser.name,"onUpdate:modelValue":t[1]||(t[1]=e=>g.commentUser.name=e),placeholder:"Please input name"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{span:4},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"ml-2",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("你的url")])),_:1})])),_:1}),(0,l.Wm)(v,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{modelValue:g.commentUser.url,"onUpdate:modelValue":t[2]||(t[2]=e=>g.commentUser.url=e),placeholder:"Please input url"},null,8,["modelValue"])])),_:1})])),_:1})]),(0,l.Wm)(W,{user:g.commentUser,id:g.markdownData.id,title:g.markdownData.title,type:"blog"},null,8,["user","id","title"])])),_:1}),(0,l.Wm)(U,{title:"评论区",name:"2"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{id:g.markdownData.id,refresh:g.refreshFlag},null,8,["id","refresh"])])),_:1})])),_:1},8,["modelValue"])])}var p=a(9510),k=a(2688),f=a(8336),h=a(1112),v=a(536),_=a(60);const D={class:"indexCard hvr-glow"},W={class:"card"},U={class:"card-body"},y={class:"userInfoDetail"},b={class:"imgLLim"},C={class:"info"},V={class:"name"},I={class:"time"},E={key:0,class:"options"},Z={class:"dataAndViews"},z={class:"viewAdnTags"},A={class:"icon"},x={class:"tags"},S={key:0,class:"desLim"};function F(e,t,a,n,o,s){const i=(0,l.up)("el-text"),d=(0,l.up)("Avatar"),m=(0,l.up)("el-button"),r=(0,l.up)("View"),c=(0,l.up)("el-icon"),u=(0,l.up)("markdownTags"),w=(0,l.up)("el-tag");return(0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("div",W,[(0,l._)("div",U,[(0,l.Wm)(i,{tag:"b",size:"large"},{default:(0,l.w5)((()=>[(0,l._)("h5",null,(0,_.zw)(a.markdownData.title),1)])),_:1}),(0,l._)("div",y,[(0,l._)("div",b,[(0,l.Wm)(d,{imgUrl:a.userInf.avatar},null,8,["imgUrl"])]),(0,l._)("div",C,[(0,l._)("p",V,[(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("发布者:")])),_:1}),(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,_.zw)(a.userInf.username),1)])),_:1})]),(0,l._)("p",null,[(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("邮箱:")])),_:1}),(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,_.zw)(a.userInf.email),1)])),_:1})]),(0,l._)("p",I,[(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("发布时间:")])),_:1}),(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,_.zw)(a.markdownData.createdAt),1)])),_:1})])]),a.showEditBtn?((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)(m,{onClick:t[0]||(t[0]=e=>s.gotoEditExperiment(a.markdownData.id))},{default:(0,l.w5)((()=>[(0,l.Uk)("前往编辑")])),_:1})])):(0,l.kq)("",!0),(0,l._)("div",Z,[(0,l._)("div",z,[(0,l._)("p",A,[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1}),(0,l.Wm)(i,{tag:"b",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,_.zw)(a.markdownData.view),1)])),_:1})])])])]),(0,l._)("span",x,[a.markdownData.tag1?((0,l.wg)(),(0,l.j4)(u,{key:0,tag:a.markdownData.tag1},null,8,["tag"])):(0,l.kq)("",!0),a.markdownData.tag2?((0,l.wg)(),(0,l.j4)(u,{key:1,tag:a.markdownData.tag2},null,8,["tag"])):(0,l.kq)("",!0),a.markdownData.tag3?((0,l.wg)(),(0,l.j4)(u,{key:2,tag:a.markdownData.tag3},null,8,["tag"])):(0,l.kq)("",!0)]),a.markdownData.description?((0,l.wg)(),(0,l.iD)("div",S,[(0,l.Wm)(w,{class:"ml-2",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("description")])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,_.zw)(a.markdownData.description),1)])),_:1})])):(0,l.kq)("",!0)])])])}var q={name:"indexCard",components:{MarkdownTags:v.Z,Avatar:f.Z},props:{title:{},userInf:{},markdownData:{},showEditBtn:""},methods:{gotoEditExperiment(e){const t=this.$router.resolve({path:"/edit/vMdEditor",query:{id:e}});window.open(t.href,"_blank")}}},$=a(8696);const M=(0,$.Z)(q,[["render",F],["__scopeId","data-v-47d31caa"]]);var B=M,T=a(4930),L=a(6483),N={name:"Read",methods:{handleCopyCodeSuccess(e){this.alertMessage("复制成功")},gotoEditExperiment(e){const t=this.$router.resolve({path:"/edit/vMdEditor",query:{id:e}});window.open(t.href,"_blank")},showEdit(){const e=JSON.parse(localStorage.getItem("userInfo"))||"";Boolean(e)&&e.email==this.userInf.email&&(this.showEditBtn=!0)},alertMessage(e,t,a){const n=a||"red";(0,h.z8)({message:(0,l.h)("p",null,[(0,l.h)("span",null,e),(0,l.h)("i",{style:`color: ${n}`},t)])})},timeFormat(e){this.markdownData.createdAt=k.Z.timeFormat(this.markdownData.createdAt)},initMarkdownData(){this.id=this.$route.query.id||"0",p.Z.$axios({url:"/markdownFile/getData",method:"POST",headers:{token:!0},data:{id:this.id}}).then((e=>{if(e.success){this.dataExist=!0;const t=!(JSON.stringify(e.result).length<3);if(t){this.markdownData=e.result,this.timeFormat();const t=e.result.content||"null";t.length>10&&(this.article=e.result.content),this.userInf=e.userInf,this.timeFormat(),this.alertMessage("load success","success","#a1c4fd"),this.showEdit()}else this.dataExist=!1,this.alertMessage("加载不出来了","文章不存在或需要从原来的博客网站爬取,可以试试刷新")}else this.dataExist=!this.dataExist,this.alertMessage("加载不出来了","你达到了不存在的领域")})).catch((e=>{this.alertMessage(e)}))}},components:{CommentArea:L.Z,IndexCard:B,Avatar:f.Z,MarkdownTags:v.Z,comment:T.Z},data(){return{markdownData:{},userInf:{},dataExist:!0,article:"",showArticle:"",loginEdEmail:"",showEditBtn:!1,id:"",commentUser:{name:"",url:""},refreshFlag:!0,activeName:"2"}},created(){this.initMarkdownData()}};const O=(0,$.Z)(N,[["render",g],["__scopeId","data-v-2034f55c"]]);var P=O}}]);
//# sourceMappingURL=994.2a6fa7d3.js.map