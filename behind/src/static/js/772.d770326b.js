"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[772],{5305:function(e,a,l){l.d(a,{Z:function(){return d}});var o=l(4535);const t={key:0,class:"alert"};function s(e,a,l,s,u,n){const r=(0,o.up)("el-alert");return l.show?((0,o.wg)(),(0,o.iD)("div",t,[(0,o.Wm)(r,{title:l.msg,type:"info",center:"","show-icon":""},null,8,["title"])])):(0,o.kq)("",!0)}var u={name:"Alert",props:["msg","show"]},n=l(8696);const r=(0,n.Z)(u,[["render",s],["__scopeId","data-v-f994ff96"]]);var d=r},5772:function(e,a,l){l.r(a),l.d(a,{default:function(){return I}});var o=l(4535);const t=e=>((0,o.dD)("data-v-f47bbab8"),e=e(),(0,o.Cn)(),e),s={class:"editUser container"},u={class:"form"},n=t((()=>(0,o._)("div",{style:{margin:"20px"}},null,-1))),r={class:"avatar"},d={class:"upload"},m=["src"],i=t((()=>(0,o._)("form",{action:"/file/avatar"},null,-1))),c={class:"achievement"};function f(e,a,l,t,f,w){const p=(0,o.up)("Avatar"),g=(0,o.up)("Plus"),b=(0,o.up)("el-icon"),h=(0,o.up)("el-upload"),v=(0,o.up)("el-input"),I=(0,o.up)("el-form-item"),V=(0,o.up)("el-form"),k=(0,o.up)("el-button"),W=(0,o.up)("Alert");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",u,[n,(0,o.Wm)(V,{"label-width":"100px"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(p,{imgUrl:f.userInfo.avatar},null,8,["imgUrl"]),(0,o._)("div",d,[(0,o.Wm)(h,{class:"avatar-uploader",data:{token:f.token},action:"/file/avatar","show-file-list":!0,"on-success":w.handleAvatarSuccess,"before-upload":w.beforeAvatarUpload},{default:(0,o.w5)((()=>[f.imageUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,src:f.imageUrl,class:"avatar"},null,8,m)):((0,o.wg)(),(0,o.j4)(b,{key:1,class:"avatar-uploader-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1}))])),_:1},8,["data","on-success","before-upload"]),i])]),(0,o.Wm)(I,{label:"avatar"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.avatar,"onUpdate:modelValue":a[0]||(a[0]=e=>f.userInfo.avatar=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"id"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.id,"onUpdate:modelValue":a[1]||(a[1]=e=>f.userInfo.id=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"Name"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.username,"onUpdate:modelValue":a[2]||(a[2]=e=>f.userInfo.username=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.email,"onUpdate:modelValue":a[3]||(a[3]=e=>f.userInfo.email=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"occupation"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.occupation,"onUpdate:modelValue":a[4]||(a[4]=e=>f.userInfo.occupation=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"githubUrl"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.githubUrl,"onUpdate:modelValue":a[5]||(a[5]=e=>f.userInfo.githubUrl=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"word"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.word,"onUpdate:modelValue":a[6]||(a[6]=e=>f.userInfo.word=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"createdAt"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.userInfo.createdAt,"onUpdate:modelValue":a[7]||(a[7]=e=>f.userInfo.createdAt=e),disabled:"true"},null,8,["modelValue"])])),_:1})])),_:1})]),(0,o._)("div",c,[(0,o.Wm)(V,{"label-width":"100px"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{label:"浏览量"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.markdownData.allView,"onUpdate:modelValue":a[8]||(a[8]=e=>f.markdownData.allView=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"文章数量"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.markdownData.allNums,"onUpdate:modelValue":a[9]||(a[9]=e=>f.markdownData.allNums=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(I,{label:"点赞数量"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:f.markdownData.diggCounts,"onUpdate:modelValue":a[10]||(a[10]=e=>f.markdownData.diggCounts=e),disabled:"true"},null,8,["modelValue"])])),_:1})])),_:1})]),(0,o.Wm)(k,{onClick:w.submitForm},{default:(0,o.w5)((()=>[(0,o.Uk)("提交一下!")])),_:1},8,["onClick"]),(0,o.Wm)(W,{msg:f.alertInf,show:f.showAlert},null,8,["msg","show"])])}var w=l(9510),p=l(8336),g=l(5305),b={name:"EditUser",data(){return{userInfo:{},markdownData:{},imageUrl:"",imgData:"",token:{token:"demotoken"},alertInf:"",showAlert:!1}},components:{Avatar:p.Z,Alert:g.Z},methods:{async handleAvatarSuccess(){console.log("handleAvatarSuccess");const e=await w.Z.$axios({url:"/user/getUserInfByToken",method:"POST",headers:{token:!0}}),a=JSON.stringify(e.result.res);console.log("tokenStr"),console.log(a),localStorage.setItem("userInfo",a)},beforeAvatarUpload(){console.log("beforeAvatarUpload")},async initUserData(){const e=await w.Z.$axios({url:"/user/userInf",method:"POST",headers:{token:!0}});console.log("res:"),console.log(e),e.success&&(this.userInfo=e.result.res,this.markdownData=e.result.markdown)},async submitForm(){console.log("submitForm"),console.log("userInfo:"),console.log(this.userInfo);const e=await w.Z.$axios({url:"/user/updateUserInf",method:"POST",headers:{token:!0},data:{...this.userInfo}});console.log("res"),console.log(e),e.success?(this.alertInf=e.message||"更新成功",this.showAlert=!0):(this.alertInf=e.message||"更新失败",this.showAlert=!0)}},created(){this.initUserData();const e=JSON.parse(localStorage.getItem("userInfo"));this.token=e.token}},h=l(8696);const v=(0,h.Z)(b,[["render",f],["__scopeId","data-v-f47bbab8"]]);var I=v}}]);
//# sourceMappingURL=772.d770326b.js.map