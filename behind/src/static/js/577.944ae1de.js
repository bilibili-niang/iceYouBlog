"use strict";(self["webpackChunkblogfront"]=self["webpackChunkblogfront"]||[]).push([[577],{6577:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var i=s(4535),a=s(60);const l=t=>((0,i.dD)("data-v-689c6767"),t=t(),(0,i.Cn)(),t),n={class:"log container"},o={key:0},r={class:"infinite-list",style:{overflow:"auto"}},c={class:"title"},g=l((()=>(0,i._)("pre",null,"id",-1))),u=l((()=>(0,i._)("pre",null,"time",-1))),d=l((()=>(0,i._)("br",null,null,-1))),h={class:"detail"},m=l((()=>(0,i._)("pre",null,"ip",-1))),f=l((()=>(0,i._)("br",null,null,-1))),p=l((()=>(0,i._)("pre",null,"fileNameAndPath",-1)));function w(t,e,s,l,w,k){const _=(0,i.up)("el-text"),v=(0,i.Q2)("infinite-scroll");return(0,i.wg)(),(0,i.iD)("div",n,[w.notIsAdmin?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(_,{class:"mx-1"},{default:(0,i.w5)((()=>[(0,i.Uk)("不是admin用户,无法查看")])),_:1})])):(0,i.kq)("",!0),(0,i.wy)(((0,i.wg)(),(0,i.iD)("ul",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.logList,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{key:e,class:"infinite-list-item"},[(0,i._)("div",c,[g,(0,i.Uk)(" "+(0,a.zw)(t.id)+" | ",1),u,(0,i.Uk)(" "+(0,a.zw)(t.time),1)]),d,(0,i._)("div",h,[m,(0,i.Uk)(" "+(0,a.zw)(t.ip)+" ",1),f,p,(0,i.Uk)(" "+(0,a.zw)(t.fileNameAndPath),1)])])))),128))])),[[v,k.initData]])])}s(4119);var k=s(9510),_=s(1112),v={name:"Log",data(){return{count:0,logList:[],lastId:0,notIsAdmin:!1}},methods:{alertMessage(t,e,s){const a=s||"red";(0,_.z8)({message:(0,i.h)("p",null,[(0,i.h)("span",null,t),(0,i.h)("i",{style:`color: ${a}`},e)]),grouping:!0})},async initData(){const t=Object.keys(this.logList).length;0==t?await k.Z.$axios({url:"/admin/getLogs",method:"POST",headers:{token:!0}}).then((t=>{this.logList=t.result,t.success||(this.alertMessage(t.message),this.notIsAdmin=!0)})).catch((t=>{this.alertMessage(t)})):await k.Z.$axios({url:"/admin/getLogs",method:"POST",headers:{token:!0},data:{offset:t}}).then((t=>{t.success||this.alertMessage(t.message),this.logList.push(...t.result),(0,_.z8)({message:t.message,grouping:!0,type:"success"})})).catch((t=>{this.alertMessage(t)}))},getLogInfo(){}},created(){this.initData(),this.getLogInfo()}},L=s(8696);const D=(0,L.Z)(v,[["render",w],["__scopeId","data-v-689c6767"]]);var y=D}}]);
//# sourceMappingURL=577.944ae1de.js.map