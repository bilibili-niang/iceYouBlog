"use strict";(self.webpackChunkblogfront=self.webpackChunkblogfront||[]).push([[922],{9922:function(a,e,t){t.r(e),t.d(e,{default:function(){return r}});var l=t(4535);const d={class:"vEdit"};var o=t(9510),n=t(1112),r=(e={name:"Vedit",created(){this.initMarkdownData()},data(){return{id:0,markdownData:{content:"> hello world!\n\ntype you first line code\n",title:"请输入你的标题",description:"这是我新建的文章",tag1:"",tag2:"",tag3:""},drawer:!1,toolbar:{customToolbar1:{title:"基础工具栏",icon:"v-md-icon-tip",action(a){a.insert((function(a){return a=a||"请输入文本",{text:`(((${a})))`,selected:a}}))}}}}},methods:{handleUploadImage(a,e,t){(new FormData).append("file",t),e({url:"/images/2.png",desc:"回显图片名称"})},initMarkdownData(){this.id=this.$route.query.id||"0",0!=this.id&&o.Z.$axios({url:"/markdownFile/getData",method:"POST",headers:{token:!0},data:{id:this.id}}).then((a=>{this.markdownData=a.result})).catch((a=>{this.alertMessage(a)}))},submit(){0==this.id?o.Z.$axios({url:"/new/markdown",method:"POST",headers:{token:!0},data:this.markdownData}).then((a=>{this.drawer=!1,a.success&&this.alertMessage(a.message)})).catch((a=>{this.alertMessage(a)})):o.Z.$axios({url:"/markdownFile/update",method:"POST",headers:{token:!0},data:{markdownData:this.markdownData}}).then((a=>{this.drawer=!1,a.success&&(this.alertMessage("数据更新","success","#a1c4fd"),this.initMarkdownData())})).catch((a=>{this.alertMessage("保存失败",a)}))},alertMessage(a,e,t){t=t||"red",(0,n.z8)({message:(0,l.h)("p",null,[(0,l.h)("span",null,a),(0,l.h)("i",{style:"color: "+t},e)])})}}},(0,t(8696).Z)(e,[["render",function(a,e,t,o,n,r){var i=(0,l.up)("v-md-editor");const m=(0,l.up)("el-input"),u=(0,l.up)("el-form-item"),s=(0,l.up)("el-form"),w=(0,l.up)("el-button");var c=(0,l.up)("el-drawer");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(i,{"include-level":[3,4,5],onSave:e[0]||(e[0]=a=>n.drawer=!0),modelValue:n.markdownData.content,"onUpdate:modelValue":e[1]||(e[1]=a=>n.markdownData.content=a),"disabled-menus":[],onUploadImage:r.handleUploadImage},null,8,["modelValue","onUploadImage"]),(0,l.Wm)(c,{modelValue:n.drawer,"onUpdate:modelValue":e[8]||(e[8]=a=>n.drawer=a),title:"填写关于该文章的其他信息",size:"70%",direction:"ttb","with-header":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"文章标题","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.title,"onUpdate:modelValue":e[2]||(e[2]=a=>n.markdownData.title=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u,{label:"文章描述","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.description,"onUpdate:modelValue":e[3]||(e[3]=a=>n.markdownData.description=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u,{label:"文章tag1","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.tag1,"onUpdate:modelValue":e[4]||(e[4]=a=>n.markdownData.tag1=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u,{label:"文章tag2","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.tag2,"onUpdate:modelValue":e[5]||(e[5]=a=>n.markdownData.tag2=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u,{label:"文章tag3","label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:n.markdownData.tag3,"onUpdate:modelValue":e[6]||(e[6]=a=>n.markdownData.tag3=a),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(w,{onClick:e[7]||(e[7]=a=>n.drawer=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("再想想")])),_:1}),(0,l.Wm)(w,{type:"primary",onClick:r.submit},{default:(0,l.w5)((()=>[(0,l.Uk)("提交")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])}],["__scopeId","data-v-321a2065"]]))}}]);